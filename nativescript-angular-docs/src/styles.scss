@use './styles_colours' as *;

/* =========================
   THEME TOKENS
   ========================= */

/* Base transitions so switches feel smooth */
:root {
  --rem-base: 16;
  font-family: 'Inter', system-ui, sans-serif;
  font-size-adjust: from-font;

  --transition-theme: color 150ms ease,
                      background-color 150ms ease,
                      border-color 150ms ease,
                      box-shadow 150ms ease;

  /* handy rgb base for translucent shadows */
  --black-rgb: 0, 0, 0;
  --shadow-10: rgba(var(--black-rgb), 0.10);
  --shadow-30: rgba(var(--black-rgb), 0.30);
}

html {
  font-size: calc(var(--rem-base) * 1px);
  scroll-behavior: smooth;
}

/* Light (default) */
:root,
:root[data-theme="light"] {
  /* semantic tokens */
  --bg:                #{$off_white_2};  // soft app background
  --surface:           #{$white};        // card/background
  --surface-alt:       #{$off_white};    // off white

  --text:              #{$black_80};
  --text-phone:        #{$black_80};
  --text-invert:       #{$black_80};
  --text-feature-card: #{$black_75};
  --text-grey-bg:      #{$black_75};
  --text-strong:       #{$black_75};
  --muted:             #{$paynes_grey};
  --yellow:            #{$yellow-dark};

  --white:             #{$off_white};

  --border:            #{$off_white_2};  // or $washed_out_blue
  --black:             #{$black_75};
  --link:              #{$sky-blue};
  --heading-bg:        #{$blue};
  --li:                #{$cyan};

  --code-fg:           #{$red};
  --code-bg:           #{$off_white};

  --pre-bg:            #{$dark_blue};
  --pre-fg:            #{$off_white};

  /* content accents */
  --heading-accent:   var(--text-strong); // h2/h3
  --content-text:     var(--text);        // p

  --code-inline-fg:   var(--code-fg);
  --code-inline-bg:   var(--code-bg);
  --pre-custom-bg:    var(--pre-bg);      // pre bg
}

/* Dark */
:root[data-theme="dark"] {
  /* semantic tokens */
  --bg:                   #{$very_dark_blue};
  --surface:              #{$very_dark_blue};
  --surface-alt:          #{$dark_blue};

  --text:                 #{$off_white_2};
  --text-phone:           #{$black_80};
  --text-invert:          #{off_white};
  --text-feature-card:    #{$black_75};
  --text-strong:          #{$white};
  --text-strong-white-bg: #{$black_75};
  --text-grey-bg:         #{$black_75};
  --muted:                #{$pale_blue};
  --yellow:               #{$yellow};

  --border:               #{$off_black};
  --link:                 #{$navy};
  --li:                   #{$cyan};

  --code-fg:              #{$red};
  --code-bg:              #{$dark_blue};

  --pre-bg:               #{$very_dark_blue};
  --pre-fg:               #{$off_white};

  /* neon-style accents (what you had in @media prefers-color-scheme: dark) */
  --heading-accent:   #{$neon-cyan};      // h2/h3
  --content-text:     #{$neon-cyan};      // p
  --code-inline-fg:   #{$neon-cyan-code};
  --code-inline-bg:   transparent;
  --pre-custom-bg:    #{$cyan-bg};
}

/* =========================
   GLOBALS
   ========================= */

.language-css,
.language-scss {
  color: var(--link);
}

html,
body {
  margin: 0;
  padding: 0;
  overscroll-behavior: none;
  height: 100%;
  background: var(--bg);
  color: var(--text);
  transition: var(--transition-theme);
}

/* =========================
   CONTENT WRAPPER
   ========================= */

.guide-content {
  overflow: auto;
  overscroll-behavior: contain; /* prevent bubbling to body */
  scroll-behavior: smooth;      /* nice default */
}

.content-wrapper {
  background: var(--surface);
  border-radius: 0.5rem;
  box-shadow: 0 1px 3px var(--shadow-10);
  height: calc(100vh - 2rem);
  overflow-y: auto;
  overscroll-behavior: contain;
  scroll-behavior: smooth;
  padding-left: 1rem;
  padding-right: 1rem;
  transition: var(--transition-theme);

  h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    color: var(--text-strong);
    border-bottom: 2px solid var(--surface-alt);
    padding-bottom: 0.5rem;
  }

  h2 {
    font-weight: 600;
    margin: 2rem 0 1rem 0;
    color: var(--heading-accent);   // changes per theme
    font-size: 1.8rem;
  }

  h3 {
    font-size: 1.5rem;
    font-weight: 600;
    margin: 1.5rem 0 0.75rem 0;
    color: var(--heading-accent);
  }

  h4 {
    color: var(--text-strong);
  }

  p {
    line-height: 1.7;
    margin-bottom: 1rem;
    color: var(--content-text);     // neon in dark, normal in light
  }

  ul,
  ol {
    margin-bottom: 1rem;
    padding-left: 1.5rem;
  }

  li {
    margin-bottom: 0.5rem;
    line-height: 1.6;
    color: var(--li);
  }

  code {
    background: var(--code-inline-bg); // theme-aware inline code
    padding: 0.125rem 0.25rem;
    border-radius: 0.25rem;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
    font-size: 0.875em;
    color: var(--code-inline-fg);
  }

  pre {
    background: var(--pre-custom-bg);  // cyan-bg in dark, dark_blue in light
    color: var(--pre-fg);
    padding: 1.5rem;
    border-radius: 0.5rem;
    overflow-x: auto;
    margin: 1rem 0;

    code {
      background: none;
      padding: 0;
      color: inherit;
    }
  }

  a {
    color: var(--link);
    text-decoration: none;

    &:hover {
      text-decoration: underline;
    }
  }
}