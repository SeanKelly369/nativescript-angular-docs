<div class="content-wrapper" ngNonBindable>
  <h1>Navigation in NativeScript-Angular</h1>
  <p>Master mobile navigation patterns and routing in NativeScript-Angular applications. This guide covers the unique navigation capabilities that make mobile apps feel native and intuitive.</p>

  <h2>Understanding Mobile Navigation</h2>
  <p>Mobile navigation differs significantly from web navigation. NativeScript-Angular provides several navigation patterns that align with platform-specific user expectations:</p>
  <ul>
    <li><strong>Forward Navigation</strong>: Moving deeper into the app hierarchy</li>
    <li><strong>Backward Navigation</strong>: Returning to previous screens with state preservation</li>
    <li><strong>Lateral Navigation</strong>: Moving between peer screens (tabs, drawers)</li>
    <li><strong>Modal Navigation</strong>: Temporary overlays for focused tasks</li>
  </ul>

  <h2>NativeScript Router Module</h2>
  <p>NativeScript extends Angular's router with mobile-specific features:</p>

<!-- <pre><code class="language-typescript" [textContent]="codeRoutes"></code></pre> -->

  <h2>Page Router Outlet</h2>
  <p>The
    <!-- <code>page-router-outlet</code> is the cornerstone of NativeScript navigation:</p>
  <pre><code class="language-html">&lt;!-- app.component.html --&gt;
&lt;page-router-outlet&gt;&lt;/page-router-outlet&gt;
</code></pre> -->

  <h3>Key Features:</h3>
  <ul>
    <li><strong>Native Navigation</strong>: Each route creates a native page with platform-specific transitions</li>
    <li><strong>ActionBar Support</strong>: Automatic back button and navigation bar integration</li>
    <li><strong>State Preservation</strong>: Components are cached during forward navigation</li>
    <li><strong>Memory Management</strong>: Components are destroyed only on backward navigation</li>
  </ul>

  <h2>RouterExtensions</h2>
  <p>NativeScript provides <code>RouterExtensions</code> for programmatic navigation with mobile-specific options:</p>
  <!-- <pre><code class="language-typescript">import { Component } from '@angular/core';
import { RouterExtensions } from '@nativescript/angular';

@Component({
  selector: 'ns-home',
  template: `
    &lt;ActionBar title="Home"&gt;
      &lt;ActionItem (tap)="navigateToSettings()" ios.systemIcon="1" android.systemIcon="ic_menu_preferences"&gt;&lt;/ActionItem&gt;
    &lt;/ActionBar&gt;
    &lt;StackLayout class="page"&gt;
      &lt;Button text="View Details" (tap)="navigateToDetail()" class="btn btn-primary"&gt;&lt;/Button&gt;
      &lt;Button text="Show Modal" (tap)="showModal()" class="btn btn-secondary"&gt;&lt;/Button&gt;
    &lt;/StackLayout&gt;
  `
})
export class HomeComponent {
  constructor(private routerExtensions: RouterExtensions) {}

  navigateToDetail() {
    this.routerExtensions.navigate(['/detail', 123], {
      transition: { name: 'slide', duration: 300, curve: 'ease' }
    });
  }

  navigateToSettings() {
    this.routerExtensions.navigate(['/settings'], { clearHistory: true });
  }

  goBack() {
    this.routerExtensions.back();
  }

  canGoBack(): boolean {
    return this.routerExtensions.canGoBack();
  }
}
</code></pre> -->

  <h3>Navigation Options:</h3>
  <ul>
    <li><strong>transition</strong>: Custom page transitions</li>
    <li><strong>clearHistory</strong>: Clear navigation history</li>
    <li><strong>animated</strong>: Enable/disable animations</li>
    <li><strong>backstackVisible</strong>: Control back button visibility</li>
  </ul>

  <h2>Forward Navigation</h2>
  <p>Forward navigation moves users deeper into the app hierarchy:</p>
  <!-- <pre><code class="language-typescript">// Master-Detail Navigation Example
@Component({
  selector: 'ns-item-list',
  template: `
    &lt;ActionBar title="Items"&gt;&lt;/ActionBar&gt;
    &lt;ListView [items]="items" (itemTap)="onItemTap($event)"&gt;
      &lt;ng-template let-item="item" let-i="index"&gt;
        &lt;GridLayout rows="auto, auto" columns="60, *" class="list-item"&gt;
          &lt;Image [src]="item.image" row="0" col="0" class="item-image"&gt;&lt;/Image&gt;
          &lt;Label [text]="item.name" row="0" col="1" class="item-name"&gt;&lt;/Label&gt;
          &lt;Label [text]="item.description" row="1" col="1" class="item-description"&gt;&lt;/Label&gt;
        &lt;/GridLayout&gt;
      &lt;/ng-template&gt;
    &lt;/ListView&gt;
  `
})
export class ItemListComponent {
  items = [
    { id: 1, name: 'Item 1', description: 'Description 1', image: '~/assets/item1.png' },
    { id: 2, name: 'Item 2', description: 'Description 2', image: '~/assets/item2.png' }
  ];

  constructor(private routerExtensions: RouterExtensions) {}

  onItemTap(args: any) {
    const item = this.items[args.index];
    this.routerExtensions.navigate(['/detail', item.id], {
      transition: { name: 'slideLeft' }
    });
  }
}
</code></pre> -->

  <h2>Backward Navigation</h2>
  <p>Backward navigation preserves the user's context and state:</p>
  <!-- <pre><code class="language-typescript">@Component({
  selector: 'ns-detail',
  template: `
    &lt;ActionBar [title]="item?.name"&gt;
      &lt;NavigationButton (tap)="goBack()" android.systemIcon="ic_menu_back"&gt;&lt;/NavigationButton&gt;
      &lt;ActionItem (tap)="share()" ios.systemIcon="9" android.systemIcon="ic_menu_share"&gt;&lt;/ActionItem&gt;
    &lt;/ActionBar&gt;
    &lt;ScrollView&gt;
      &lt;StackLayout class="page" *ngIf="item"&gt;
        &lt;Image [src]="item.image" class="detail-image"&gt;&lt;/Image&gt;
        &lt;Label [text]="item.name" class="h1"&gt;&lt;/Label&gt;
        &lt;Label [text]="item.description" class="body" textWrap="true"&gt;&lt;/Label&gt;
        &lt;Button text="Edit" (tap)="edit()" class="btn btn-primary"&gt;&lt;/Button&gt;
      &lt;/StackLayout&gt;
    &lt;/ScrollView&gt;
  `
})
export class DetailComponent implements OnInit {
  item: any;

  constructor(private route: ActivatedRoute, private routerExtensions: RouterExtensions) {}

  ngOnInit() {
    const id = +this.route.snapshot.params['id'];
    // Load item data
  }

  goBack() {
    this.routerExtensions.back();
  }

  edit() {
    this.routerExtensions.navigate(['/edit', this.item.id]);
  }
}
</code></pre> -->

  <h2>Tab Navigation</h2>
  <h3>Using TabView</h3>
  <pre><code class="language-html">&lt;TabView selectedIndex="0" (selectedIndexChange)="onTabChange($event)"&gt;
  &lt;StackLayout *tabItem="{title: 'Home', iconSource: 'res://home'}"&gt;
    &lt;page-router-outlet name="home"&gt;&lt;/page-router-outlet&gt;
  &lt;/StackLayout&gt;

  &lt;StackLayout *tabItem="{title: 'Search', iconSource: 'res://search'}"&gt;
    &lt;page-router-outlet name="search"&gt;&lt;/page-router-outlet&gt;
  &lt;/StackLayout&gt;

  &lt;StackLayout *tabItem="{title: 'Profile', iconSource: 'res://profile'}"&gt;
    &lt;page-router-outlet name="profile"&gt;&lt;/page-router-outlet&gt;
  &lt;/StackLayout&gt;
&lt;/TabView&gt;
</code></pre>

  <h3>Using BottomNavigation (Recommended)</h3>
  <!-- <pre><code class="language-html">&lt;BottomNavigation&gt;
  &lt;TabStrip&gt;
    &lt;TabStripItem title="Home" iconSource="font://&#xf015;" class="fas"&gt;&lt;/TabStripItem&gt;
    &lt;TabStripItem title="Search" iconSource="font://&#xf002;" class="fas"&gt;&lt;/TabStripItem&gt;
    &lt;TabStripItem title="Profile" iconSource="font://&#xf007;" class="fas"&gt;&lt;/TabStripItem&gt;
  &lt;/TabStrip&gt;

  &lt;TabContentItem&gt;
    &lt;page-router-outlet name="home"&gt;&lt;/page-router-outlet&gt;
  &lt;/TabContentItem&gt;

  &lt;TabContentItem&gt;
    &lt;page-router-outlet name="search"&gt;&lt;/page-router-outlet&gt;
  &lt;/TabContentItem&gt;

  &lt;TabContentItem&gt;
    &lt;page-router-outlet name="profile"&gt;&lt;/page-router-outlet&gt;
  &lt;/TabContentItem&gt;
&lt;/BottomNavigation&gt;
</code></pre> -->

  <h3>Tab Navigation Component</h3>
  <!-- <pre><code class="language-typescript">@Component({
  selector: 'ns-tabs',
  template: `
    &lt;BottomNavigation (tabSelected)="onTabSelected($event)"&gt;
      &lt;TabStrip&gt;
        &lt;TabStripItem title="Home" iconSource="~/assets/home.png"&gt;&lt;/TabStripItem&gt;
        &lt;TabStripItem title="Search" iconSource="~/assets/search.png"&gt;&lt;/TabStripItem&gt;
        &lt;TabStripItem title="Profile" iconSource="~/assets/profile.png"&gt;&lt;/TabStripItem&gt;
      &lt;/TabStrip&gt;

      &lt;TabContentItem&gt;
        &lt;page-router-outlet name="homeTab"&gt;&lt;/page-router-outlet&gt;
      &lt;/TabContentItem&gt;
      &lt;TabContentItem&gt;
        &lt;page-router-outlet name="searchTab"&gt;&lt;/page-router-outlet&gt;
      &lt;/TabContentItem&gt;
      &lt;TabContentItem&gt;
        &lt;page-router-outlet name="profileTab"&gt;&lt;/page-router-outlet&gt;
      &lt;/TabContentItem&gt;
    &lt;/BottomNavigation&gt;
  `
})
export class TabsComponent {
  onTabSelected(event: any) {
    const selectedIndex = event.newIndex;
    console.log('Selected tab:', selectedIndex);
  }
}
</code></pre> -->

  <h2>Modal Navigation</h2>
  <p>Modals provide focused workflows without losing the user's place:</p>

  <h3>Basic Modal</h3>
  <!-- <pre><code class="language-typescript">import { Component, ViewContainerRef } from '@angular/core';
import { ModalDialogService, ModalDialogOptions } from '@nativescript/angular';

@Component({
  selector: 'ns-modal-example',
  template: `
    &lt;StackLayout class="page"&gt;
      &lt;Button text="Show Modal" (tap)="showModal()" class="btn btn-primary"&gt;&lt;/Button&gt;
    &lt;/StackLayout&gt;
  `
})
export class ModalExampleComponent {
  constructor(private modal: ModalDialogService, private vcRef: ViewContainerRef) {}

  showModal() {
    const options: ModalDialogOptions = {
      viewContainerRef: this.vcRef,
      context: { title: 'Modal Title', message: 'This is a modal dialog' },
      fullscreen: false,
      animated: true
    };

    this.modal.showModal(ModalContentComponent, options)
      .then(result =&gt; console.log('Modal result:', result));
  }
}
</code></pre> -->

  <h3>Modal Content Component</h3>
  <!-- <pre><code class="language-typescript">@Component({
  selector: 'ns-modal-content',
  template: `
    &lt;StackLayout class="modal-content"&gt;
      &lt;Label [text]="title" class="h2 text-center"&gt;&lt;/Label&gt;
      &lt;Label [text]="message" class="body text-center" textWrap="true"&gt;&lt;/Label&gt;
      &lt;StackLayout orientation="horizontal" horizontalAlignment="center"&gt;
        &lt;Button text="Cancel" (tap)="cancel()" class="btn btn-secondary"&gt;&lt;/Button&gt;
        &lt;Button text="OK" (tap)="confirm()" class="btn btn-primary"&gt;&lt;/Button&gt;
      &lt;/StackLayout&gt;
    &lt;/StackLayout&gt;
  `
})
export class ModalContentComponent {
  title: string;
  message: string;

  constructor(private params: ModalDialogParams) {
    this.title = params.context.title;
    this.message = params.context.message;
  }

  cancel() { this.params.closeCallback(false); }
  confirm() { this.params.closeCallback(true); }
}
</code></pre> -->

  <h2>Drawer Navigation</h2>
  <p>Side drawer navigation provides access to main navigation options:</p>
  <!-- <pre><code class="language-html">&lt;RadSideDrawer&gt;
  &lt;StackLayout tkDrawerContent class="drawer-content"&gt;
    &lt;Label text="Navigation Menu" class="drawer-header"&gt;&lt;/Label&gt;
    &lt;Button text="Home" (tap)="navigateToHome()" class="drawer-item"&gt;&lt;/Button&gt;
    &lt;Button text="Profile" (tap)="navigateToProfile()" class="drawer-item"&gt;&lt;/Button&gt;
    &lt;Button text="Settings" (tap)="navigateToSettings()" class="drawer-item"&gt;&lt;/Button&gt;
  &lt;/StackLayout&gt;

  &lt;StackLayout tkMainContent&gt;
    &lt;ActionBar title="App"&gt;
      &lt;NavigationButton (tap)="toggleDrawer()" android.systemIcon="ic_menu_sort_by_size"&gt;&lt;/NavigationButton&gt;
    &lt;/ActionBar&gt;
    &lt;page-router-outlet&gt;&lt;/page-router-outlet&gt;
  &lt;/StackLayout&gt;
&lt;/RadSideDrawer&gt;
</code></pre> -->

  <h3>Drawer Component</h3>
  <!-- <pre><code class="language-typescript">import { Component, ViewChild } from '@angular/core';
import { RadSideDrawerComponent } from 'nativescript-ui-sidedrawer/angular';

@Component({
  selector: 'ns-drawer',
  templateUrl: './drawer.component.html'
})
export class DrawerComponent {
  @ViewChild(RadSideDrawerComponent, { static: false })
  drawerComponent!: RadSideDrawerComponent;

  constructor(private routerExtensions: RouterExtensions) {}

  toggleDrawer() {
    this.drawerComponent.sideDrawer.toggleDrawerState();
  }

  navigateToHome() {
    this.routerExtensions.navigate(['/home']);
    this.drawerComponent.sideDrawer.closeDrawer();
  }

  navigateToProfile() {
    this.routerExtensions.navigate(['/profile']);
    this.drawerComponent.sideDrawer.closeDrawer();
  }
}
</code></pre> -->

  <h2>Route Guards</h2>
  <p>Protect routes with Angular guards that work with mobile navigation:</p>
  <!-- <pre><code class="language-typescript">import { Injectable } from '@angular/core';
import { CanActivate, Router } from '@angular/router';
import { AuthService } from './auth.service';

@Injectable()
export class AuthGuard implements CanActivate {
  constructor(private authService: AuthService, private router: Router) {}

  canActivate(): boolean {
    if (this.authService.isAuthenticated()) { return true; }
    this.router.navigate(['/login']);
    return false;
  }
}

// In routing module
{
  path: 'profile',
  component: ProfileComponent,
  canActivate: [AuthGuard]
}
</code></pre> -->

  <h2>Navigation Transitions</h2>
  <p>Customize page transitions for better user experience:</p>
  <!-- <pre><code class="language-typescript">// Custom transition
this.routerExtensions.navigate(['/detail'], {
  transition: { name: 'slideTop', duration: 400, curve: 'easeInOut' }
});

// Platform-specific transitions
this.routerExtensions.navigate(['/detail'], {
  transition: { name: isIOS ? 'curl' : 'explode', duration: 300 }
});
</code></pre> -->

  <h3>Available Transitions:</h3>
  <ul>
    <li><strong>slide</strong>: Slide from right (default)</li>
    <li><strong>slideLeft</strong>: Slide from left</li>
    <li><strong>slideTop</strong>: Slide from top</li>
    <li><strong>slideBottom</strong>: Slide from bottom</li>
    <li><strong>fade</strong>: Fade in/out</li>
    <li><strong>flip</strong>: 3D flip</li>
    <li><strong>curl</strong>: Page curl (iOS only)</li>
    <li><strong>explode</strong>: Explode effect (Android only)</li>
  </ul>

  <h2>Deep Linking</h2>
  <p>Handle deep links and URL schemes:</p>
  <!-- <pre><code class="language-typescript">// app.component.ts
import { Component, OnInit } from '@angular/core';
import { RouterExtensions } from '@nativescript/angular';

@Component({
  selector: 'ns-app',
  template: '&lt;page-router-outlet&gt;&lt;/page-router-outlet&gt;'
})
export class AppComponent implements OnInit {
  constructor(private routerExtensions: RouterExtensions) {}

  ngOnInit() {
    const url = this.getAppLaunchUrl();
    if (url) { this.handleDeepLink(url); }
  }

  private handleDeepLink(url: string) {
    const route = this.parseUrl(url);
    this.routerExtensions.navigate([route.path], { queryParams: route.params });
  }
}
</code></pre> -->

  <h2>Best Practices</h2>
  <h3>1. Use Appropriate Navigation Patterns</h3>
  <ul>
    <li><strong>Hierarchical</strong>: Use page navigation for master-detail flows</li>
    <li><strong>Flat</strong>: Use tabs for peer-level content</li>
    <li><strong>Modal</strong>: Use modals for temporary, focused tasks</li>
  </ul>

  <h3>2. Preserve Navigation State</h3>
  <!-- <pre><code class="language-typescript">// Don't clear history unnecessarily
this.routerExtensions.navigate(['/detail'], { clearHistory: false });

// Clear history only for major transitions
this.routerExtensions.navigate(['/login'], { clearHistory: true });
</code></pre> -->

  <h3>3. Handle Hardware Back Button</h3>

  <!-- <pre><code class="language-typescript">import { Application } from '@nativescript/core';

export class MyComponent {
  constructor(private routerExtensions: RouterExtensions) {
    Application.android.on('activityBackPressed', this.onBackPressed, this);
  }

  onBackPressed(args: any) {
    if (this.canNavigateBack()) {
      this.routerExtensions.back();
      args.cancel = true;
    }
  }

  canNavigateBack(): boolean {
    return this.routerExtensions.canGoBack();
  }
}
    </code></pre> -->

    <h3>4. Optimize for Performance</h3>
    <!-- <pre><code class="language-typescript">// Lazy load routes for better performance
    const routes: Routes = [
    {
        path: 'feature',
        loadChildren: () =&gt; import('./feature/feature.module').then(m =&gt; m.FeatureModule)
    }
    ];
    </code></pre> -->

  <h2>Troubleshooting</h2>
  <h3>Common Issues:</h3>
  <ol>
    <li><strong>ActionBar not showing</strong>: Ensure you're using <code>page-router-outlet</code></li>
    <li><strong>Back button not working</strong>: Check if <code>clearHistory</code> was used inappropriately</li>
    <li><strong>State not preserved</strong>: Verify component lifecycle in <code>page-router-outlet</code></li>
    <li><strong>Transitions not smooth</strong>: Optimize component rendering and avoid heavy operations during navigation</li>
  </ol>

  <h2>Next Steps</h2>
  <ul>
    <li><a href="/guide/styling"><strong>Styling</strong></a> — Learn about styling and theming your navigation</li>
    <li><a href="/guide/performance"><strong>Performance</strong></a> — Optimize navigation performance</li>
    <li><a href="/guide/testing"><strong>Testing</strong></a> — Test navigation flows</li>
    <li><a href="/examples"><strong>Examples</strong></a> — Explore navigation examples</li>
  </ul>
</div>
